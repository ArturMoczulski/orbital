{"version":3,"file":"prometheus-monitor.module.js","sourceRoot":"","sources":["prometheus-monitor.module.ts"],"names":[],"mappings":";;;;;;;;;AAAA,+BAA+B;AAC/B,2CAAwC;AACxC,mEAIqC;AACrC,6EAAwE;AACxE,mFAA8E;AAC9E,4EAAuE;AA0BhE,IAAM,uBAAuB,GAA7B,MAAM,uBAAuB;CAAG,CAAA;AAA1B,0DAAuB;kCAAvB,uBAAuB;IAxBnC,IAAA,eAAM,EAAC;QACN,OAAO,EAAE,CAAC,mDAAuB,CAAC;QAClC,WAAW,EAAE,CAAC,2DAA2B,CAAC;QAC1C,SAAS,EAAE;YACT,qDAAwB;YACxB,uBAAuB;YACvB,IAAA,qCAAiB,EAAC;gBAChB,IAAI,EAAE,+BAA+B;gBACrC,IAAI,EAAE,wDAAwD;gBAC9D,UAAU,EAAE,CAAC,eAAe,CAAC;aAC9B,CAAC;YACF,IAAA,uCAAmB,EAAC;gBAClB,IAAI,EAAE,qBAAqB;gBAC3B,IAAI,EAAE,6CAA6C;gBACnD,UAAU,EAAE,CAAC,eAAe,CAAC;aAC9B,CAAC;YACF,IAAA,qCAAiB,EAAC;gBAChB,IAAI,EAAE,qBAAqB;gBAC3B,IAAI,EAAE,2EAA2E;gBACjF,UAAU,EAAE,CAAC,eAAe,CAAC;aAC9B,CAAC;SACH;QACD,OAAO,EAAE,CAAC,qDAAwB,CAAC;KACpC,CAAC;GACW,uBAAuB,CAAG","sourcesContent":["// prometheus-monitor.module.ts\nimport { Module } from \"@nestjs/common\";\nimport {\n  PrometheusModule,\n  makeGaugeProvider,\n  makeCounterProvider,\n} from \"@willsoto/nestjs-prometheus\";\nimport { PrometheusMonitorService } from \"./prometheus-monitor.service\";\nimport { PrometheusMonitorController } from \"./prometheus-monitor.controller\";\nimport { IntervalsRegistryModule } from \"../intervals-registry.module\";\n\n@Module({\n  imports: [IntervalsRegistryModule],\n  controllers: [PrometheusMonitorController],\n  providers: [\n    PrometheusMonitorService,\n    // Declare your metrics\n    makeGaugeProvider({\n      name: \"interval_last_run_duration_ms\",\n      help: \"Tracks the most recent run time (ms) for each interval\",\n      labelNames: [\"interval_name\"],\n    }),\n    makeCounterProvider({\n      name: \"interval_runs_total\",\n      help: \"Counts how many times each interval has run\",\n      labelNames: [\"interval_name\"],\n    }),\n    makeGaugeProvider({\n      name: \"interval_state_code\",\n      help: \"Represents the interval state as a numeric code (e.g. RUNNING=2, ERROR=7)\",\n      labelNames: [\"interval_name\"],\n    }),\n  ],\n  exports: [PrometheusMonitorService],\n})\nexport class PrometheusMonitorModule {}\n"]}