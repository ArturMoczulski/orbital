#!/usr/bin/env node
import { program } from "commander";
import figlet from "figlet";
import fs from "fs";
import path from "path";
import { fileURLToPath } from "url";

const scriptPath = fileURLToPath(import.meta.url);
const __dirname = path.dirname(scriptPath);

console.log(figlet.textSync("orb"));

// Default to interactive 'manage' when no command is provided
if (process.argv.length <= 2) {
  process.argv.push("manage");
}

program.version(
  JSON.parse(
    fs.readFileSync(path.join(__dirname, "../../../package.json"), "utf8")
  ).version
);

import createCmd from "../src/commands/create.js";
import monorepoCmd from "../src/commands/monorepo.js";
import profileCmd from "../src/commands/profile.js";
import manageCmd from "../src/commands/manage.js";

program.addCommand(createCmd);
program.addCommand(monorepoCmd);
program.addCommand(profileCmd);
program.addCommand(manageCmd);

program.parse(process.argv);
